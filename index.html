<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Species Intelligence Research Agent v24</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.23.6/babel.min.js"></script>
    
    <style>
        .fade-in { animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .spinner { border: 3px solid #f3f3f3; border-top: 3px solid #3b82f6; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; display: inline-block; margin-right: 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .species-input { transition: all 0.3s ease; }
        .species-input:focus { box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); border-color: #3b82f6; }
        button { transition: all 0.2s ease; }
        button:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
    const { useState, useRef, useEffect } = React;

    // Simple Icon Components
    const Search = () => <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>;
    const Brain = () => <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>;
    const Plus = () => <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>;
    const X = () => <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>;
    const Heart = () => <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>;
    const Eye = () => <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>;

    const SpeciesIntelligenceResearcher = () => {
        const [speciesList, setSpeciesList] = useState([
            { id: 'species-1', name: 'trees', label: 'First Life Form' },
            { id: 'species-2', name: 'octopuses', label: 'Second Life Form' }
        ]);
        const [includeHumans, setIncludeHumans] = useState(false);
        const [researchResults, setResearchResults] = useState(null);
        const [isResearching, setIsResearching] = useState(false);
        const [researchProgress, setResearchProgress] = useState('');
        const [showMap, setShowMap] = useState(false);
        const canvasRef = useRef(null);

        const addSpecies = () => {
            if (speciesList.length < 5) {
                setSpeciesList([...speciesList, {
                    id: `species-${Date.now()}`,
                    name: '',
                    label: `Life Form ${speciesList.length + 1}`
                }]);
            }
        };

        const removeSpecies = (id) => {
            if (speciesList.length > 2) {
                setSpeciesList(speciesList.filter(s => s.id !== id));
            }
        };

        const updateSpecies = (id, name) => {
            setSpeciesList(speciesList.map(s => s.id === id ? { ...s, name } : s));
        };

        const getSpeciesWisdom = (speciesName) => {
            const name = speciesName.toLowerCase();
            
            if (name.includes('tree')) {
                return "Trees embody the wisdom of deep time and interconnected generosity, showing us that true intelligence flows through relationship and patient presence.";
            }
            else if (name.includes('octop')) {
                return "Octopuses teach us that intelligence can be fluid, creative, and deeply embodied - thinking not just with our minds but with our entire being.";
            }
            else if (name.includes('human')) {
                return "Humans demonstrate the power of collective intelligence and symbolic thinking, showing how individual minds can unite to understand reality.";
            }
            else if (name.includes('hummingbird')) {
                return "Hummingbirds embody the intelligence of precision and grace, showing us how to live intensely while maintaining perfect balance and efficiency.";
            }
            else if (name.includes('cat')) {
                return "Cats teach us the intelligence of presence and patience, showing how awareness and readiness can be more powerful than constant action.";
            }
            else if (name.includes('dolphin')) {
                return "Dolphins embody the intelligence of joy and connection, showing us that play, empathy, and community are essential aspects of consciousness.";
            }
            else if (name.includes('bee')) {
                return "Bees reveal the intelligence of collective harmony, showing how individual actions can create emergent wisdom greater than the sum of its parts.";
            }
            else if (name.includes('whale')) {
                return "Whales embody the intelligence of depth and endurance, teaching us about the wisdom that comes from navigating life's deepest currents with grace.";
            }
            else if (name.includes('fungi') || name.includes('mushroom') || name.includes('mycelium')) {
                return "Fungi reveal the intelligence of connection and transformation, showing us how to turn endings into beginnings and create abundance through generous networking.";
            }
            else if (name.includes('elephant')) {
                return "Elephants embody the intelligence of memory and compassion, teaching us that wisdom grows through caring for others and honoring ancestral knowledge.";
            }
            else {
                return `${speciesName} embodies a unique form of intelligence perfectly suited to their role in the web of life, contributing irreplaceable wisdom to our understanding of consciousness.`;
            }
        };

        const drawTriangleMap = () => {
            if (!canvasRef.current || !researchResults) return;

            try {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                canvas.width = 400;
                canvas.height = 400;

                // Clear with gradient background
                const gradient = ctx.createRadialGradient(200, 200, 0, 200, 200, 200);
                gradient.addColorStop(0, '#f8fafc');
                gradient.addColorStop(1, '#e2e8f0');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 400, 400);

                // Draw triangle
                ctx.strokeStyle = '#64748b';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(200, 60);  // Top - PERCEIVE
                ctx.lineTo(60, 340);  // Bottom left - RELATE
                ctx.lineTo(340, 340); // Bottom right - APPLY
                ctx.closePath();
                ctx.stroke();

                // Fill triangle with subtle gradient
                const triGradient = ctx.createLinearGradient(60, 340, 340, 340);
                triGradient.addColorStop(0, 'rgba(34, 197, 94, 0.1)');
                triGradient.addColorStop(0.5, 'rgba(59, 130, 246, 0.1)');
                triGradient.addColorStop(1, 'rgba(147, 51, 234, 0.1)');
                ctx.fillStyle = triGradient;
                ctx.fill();

                // Draw corner labels and circles
                const corners = [
                    { x: 200, y: 60, label: 'PERCEIVE', color: 'rgba(59, 130, 246, 0.8)' },
                    { x: 60, y: 340, label: 'RELATE', color: 'rgba(34, 197, 94, 0.8)' },
                    { x: 340, y: 340, label: 'APPLY', color: 'rgba(147, 51, 234, 0.8)' }
                ];

                corners.forEach(corner => {
                    ctx.fillStyle = corner.color;
                    ctx.beginPath();
                    ctx.arc(corner.x, corner.y, 25, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 11px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText(corner.label, corner.x, corner.y + 4);
                });

                // Draw species points
                const allSpecies = [...researchResults.allSpecies];
                if (includeHumans && !allSpecies.some(s => s.species.toLowerCase().includes('human'))) {
                    allSpecies.push({ species: 'humans' });
                }

                allSpecies.forEach((species, i) => {
                    // Calculate position (demo positioning in triangle)
                    const angle = (i / allSpecies.length) * 2 * Math.PI;
                    const radius = 60 + (i * 15);
                    let x = 200 + Math.cos(angle) * radius;
                    let y = 200 + Math.sin(angle) * radius;

                    // Keep points within triangle bounds
                    x = Math.max(80, Math.min(320, x));
                    y = Math.max(80, Math.min(320, y));

                    // Generate color
                    const hue = (i * 60) % 360;
                    const color = `hsl(${hue}, 70%, 60%)`;

                    // Draw species point
                    ctx.fillStyle = color;
                    ctx.beginPath();
                    ctx.arc(x, y, 8, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    ctx.strokeStyle = 'white';
                    ctx.lineWidth = 2;
                    ctx.stroke();

                    // Draw name
                    ctx.fillStyle = '#1f2937';
                    ctx.font = 'bold 10px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText(species.species, x, y + 20);
                });

            } catch (error) {
                console.error('Canvas drawing error:', error);
            }
        };

        useEffect(() => {
            if (showMap && researchResults) {
                drawTriangleMap();
            }
        }, [showMap, researchResults]);

        const conductResearch = async () => {
            const validSpecies = speciesList.filter(s => s.name.trim());
            if (validSpecies.length < 2) {
                alert("Please enter at least two species/life forms to compare");
                return;
            }

            setIsResearching(true);
            setResearchResults(null);

            try {
                // Simulate research phases
                setResearchProgress("Initializing quantum intelligence analysis...");
                await new Promise(resolve => setTimeout(resolve, 800));

                const allSpeciesData = [];

                for (let i = 0; i < validSpecies.length; i++) {
                    const species = validSpecies[i];
                    setResearchProgress(`Researching intelligence patterns in ${species.name}...`);
                    allSpeciesData.push({
                        species: species.name,
                        wisdom: getSpeciesWisdom(species.name)
                    });
                    await new Promise(resolve => setTimeout(resolve, 600));
                }

                if (includeHumans) {
                    setResearchProgress("Analyzing human intelligence within the relational framework...");
                    allSpeciesData.push({
                        species: 'humans',
                        wisdom: getSpeciesWisdom('humans')
                    });
                    await new Promise(resolve => setTimeout(resolve, 500));
                }

                setResearchProgress("Synthesizing multi-species insights...");
                await new Promise(resolve => setTimeout(resolve, 800));

                // Generate results
                const results = {
                    allSpecies: allSpeciesData,
                    comparison: {
                        similarities: [
                            "All demonstrate quantum coherence in their biological processes",
                            "Each shows strategic non-response as sophisticated intelligence", 
                            "All have evolved complex relational communication systems"
                        ],
                        differences: [
                            "Different temporal scales of intelligence operation",
                            "Varying specialization in perception, relation, and application",
                            "Unique ecological niche adaptations"
                        ],
                        wholeLifeContribution: [
                            ...allSpeciesData.map(species => `${species.species}: ${species.wisdom.split(',')[0]}`),
                            "Together creating a resilient web of diverse intelligence types"
                        ]
                    },
                    timestamp: new Date().toLocaleString()
                };

                setResearchResults(results);
                setResearchProgress("Multi-species research completed successfully!");
                
            } catch (error) {
                console.error('Research error:', error);
                setResearchProgress("Error: Research process failed");
            } finally {
                setIsResearching(false);
                setTimeout(() => setResearchProgress(''), 3000);
            }
        };

        return (
            <div className="max-w-6xl mx-auto p-6 bg-gradient-to-br from-blue-50 via-white to-green-50 min-h-screen">
                {/* Header */}
                <div className="text-center mb-8">
                    <h1 className="text-4xl font-bold text-gray-800 mb-2 flex items-center justify-center gap-3">
                        <Brain />
                        Species Intelligence Research Agent
                    </h1>
                    <p className="text-lg text-gray-600 max-w-3xl mx-auto">
                        Exploring intelligence through quantum-enhanced relational capacity across all life forms
                    </p>
                    <p className="text-sm text-gray-500 mt-2">
                        Multi-Species Support • Triangular Intelligence Mapping • Wisdom-Based Insights
                    </p>
                </div>

                {/* Multi-Species Input */}
                <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <h2 className="text-2xl font-semibold text-gray-800 mb-4">Research Parameters</h2>
                    
                    <div className="space-y-4 mb-4">
                        {speciesList.map((species) => (
                            <div key={species.id} className="flex items-center gap-3">
                                <div className="flex-1">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        {species.label}:
                                    </label>
                                    <input
                                        type="text"
                                        value={species.name}
                                        onChange={(e) => updateSpecies(species.id, e.target.value)}
                                        className="species-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="e.g., dolphins, mycorrhizal networks, coral reefs"
                                        disabled={isResearching}
                                    />
                                </div>
                                {speciesList.length > 2 && (
                                    <button
                                        onClick={() => removeSpecies(species.id)}
                                        className="mt-6 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                                        disabled={isResearching}
                                    >
                                        <X />
                                    </button>
                                )}
                            </div>
                        ))}
                    </div>

                    {speciesList.length < 5 && (
                        <button
                            onClick={addSpecies}
                            className="flex items-center gap-2 px-4 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors mb-6"
                            disabled={isResearching}
                        >
                            <Plus />
                            Add Another Life Form ({speciesList.length}/5)
                        </button>
                    )}

                    <div className="mb-6 p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border border-green-200">
                        <div className="flex items-center justify-between">
                            <div>
                                <h3 className="font-semibold text-gray-800 mb-1">Include Human Intelligence Analysis</h3>
                                <p className="text-sm text-gray-600">Add humans as an additional comparison point to provide familiar context within the broader spectrum of life.</p>
                            </div>
                            <label className="relative inline-flex items-center cursor-pointer ml-4">
                                <input
                                    type="checkbox"
                                    checked={includeHumans}
                                    onChange={(e) => setIncludeHumans(e.target.checked)}
                                    disabled={isResearching}
                                    className="sr-only peer"
                                />
                                <div className="relative w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 transition-colors">
                                    <div className={`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform ${includeHumans ? 'translate-x-5' : 'translate-x-0'}`}></div>
                                </div>
                                <span className="ml-3 text-sm font-medium text-gray-700">
                                    {includeHumans ? 'Human Baseline Included' : 'Add Human Baseline'}
                                </span>
                            </label>
                        </div>
                    </div>

                    <button
                        onClick={conductResearch}
                        disabled={isResearching || speciesList.filter(s => s.name.trim()).length < 2}
                        className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
                    >
                        {isResearching ? (
                            <>
                                <div className="spinner"></div>
                                Researching...
                            </>
                        ) : (
                            <>
                                <Search />
                                Begin Multi-Species Intelligence Research
                            </>
                        )}
                    </button>

                    {(researchProgress || isResearching) && (
                        <div className="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
                            <div className="flex items-center gap-2">
                                {isResearching && <div className="spinner"></div>}
                                <p className="text-blue-700 font-medium">
                                    {researchProgress || "Initializing research..."}
                                </p>
                            </div>
                        </div>
                    )}
                </div>

                {/* Results */}
                {researchResults && (
                    <div className="space-y-6">
                        {/* Main Results */}
                        <div className="bg-white rounded-xl shadow-lg p-6">
                            <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
                                <Heart />
                                Multi-Species Intelligence Analysis
                            </h2>
                            
                            <div className="grid md:grid-cols-3 gap-4">
                                <div className="p-4 bg-blue-50 rounded-lg">
                                    <h3 className="font-semibold text-blue-800 mb-2">How They're Alike</h3>
                                    <ul className="text-sm text-gray-700 space-y-1">
                                        {researchResults.comparison.similarities.map((item, i) => (
                                            <li key={i}>• {item}</li>
                                        ))}
                                    </ul>
                                </div>
                                
                                <div className="p-4 bg-purple-50 rounded-lg">
                                    <h3 className="font-semibold text-purple-800 mb-2">How They're Different</h3>
                                    <ul className="text-sm text-gray-700 space-y-1">
                                        {researchResults.comparison.differences.map((item, i) => (
                                            <li key={i}>• {item}</li>
                                        ))}
                                    </ul>
                                </div>
                                
                                <div className="p-4 bg-green-50 rounded-lg">
                                    <h3 className="font-semibold text-green-800 mb-2">Life Contributions</h3>
                                    <ul className="text-sm text-gray-700 space-y-1">
                                        {researchResults.comparison.wholeLifeContribution.map((item, i) => (
                                            <li key={i}>• {item}</li>
                                        ))}
                                    </ul>
                                </div>
                            </div>
                        </div>

                        {/* Wisdom Profiles */}
                        <div className="bg-white rounded-xl shadow-lg p-6">
                            <h3 className="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
                                <Brain />
                                Species Wisdom Insights
                            </h3>
                            
                            <div className="grid gap-4">
                                {researchResults.allSpecies.map((species, index) => (
                                    <div key={index} className="p-4 bg-gradient-to-r from-gray-50 to-white rounded-lg border border-gray-200">
                                        <h4 className="text-lg font-semibold text-gray-800 capitalize mb-2">{species.species}</h4>
                                        <p className="text-gray-600 italic text-sm leading-relaxed">{species.wisdom}</p>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Optional Triangle Map */}
                        <div className="bg-white rounded-xl shadow-lg p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-xl font-semibold flex items-center gap-2">
                                    <Eye />
                                    Triangular Intelligence Map
                                </h2>
                                <button
                                    onClick={() => setShowMap(!showMap)}
                                    className="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors"
                                >
                                    {showMap ? 'Hide' : 'Show'} Map
                                </button>
                            </div>

                            {showMap && (
                                <div className="text-center space-y-4">
                                    <canvas 
                                        ref={canvasRef}
                                        className="border rounded-lg shadow-sm mx-auto"
                                        style={{ maxWidth: '100%' }}
                                    />
                                    <div className="text-sm text-gray-600 bg-blue-50 p-3 rounded">
                                        <p><strong>Triangle Guide:</strong> PERCEIVE (top), RELATE (bottom-left), APPLY (bottom-right)</p>
                                        <p>Species positioned based on intelligence patterns - closer together = more similar</p>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Summary */}
                        <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4">
                            <p className="text-center text-gray-700">
                                <strong>Analysis Complete!</strong> Explored {researchResults.allSpecies.length} life forms showing the diverse intelligence spectrum across our planet.
                            </p>
                        </div>
                    </div>
                )}
            </div>
        );
    };

    ReactDOM.render(<SpeciesIntelligenceResearcher />, document.getElementById('root'));
    </script>
</body>
</html>
